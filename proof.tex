%!TEX root = draft.tex




\section{Proof of JSON}
\label{sec:proof of JSON} 

We assume that there is a relation $\approx$ between concrete state of multi-value register (resp., map and list) and abstract state of multi-value register (resp., map and list). Here we assume that $(\abstate_{\bot},\abstate_{\bot}) \in \approx$. 

Our proof methodology contains two part. The first part is that, the messages of concurrent commands commute. 

The second part is that, we need to prove that there exists a relation $\thicksim$ between configurations of JSON implementation and configurations of JSON specification. $(X,O,Par,Key,f,S_{\mathit{imp}}) \thicksim (X,O,Par,Key,f,S_{\mathit{abs}})$, if for each object id $\mathit{id}$, we have that $S_{\mathit{imp}}(\mathit{id}) \approx S_{\mathit{abs}}(\mathit{id})$. Moreover, we need to prove that $\thicksim$ is a simulation relation. Or we can say,  

\begin{itemize}
\setlength{\itemsep}{0.5pt}
\item[-] If the message $\mathit{msg} = (u.m(a)\Rightarrow b) \cdot \mathit{eff}$: Assume that $(X,O,Par,Key,f,S_{\mathit{imp}}) \xrightarrow{(u.m(a)\Rightarrow b) \cdot \mathit{eff}} (X,O \cup \{ o(u,m) \},Par,Key,f[l(u) \leftarrow o(u,m)],S'_{\mathit{imp}})$. Then, $(X,O,Par,Key,f,S_{\mathit{abs}}) \xrightarrow{u.m(a)\Rightarrow b} (X,O \cup \{ o(u,m) \},Par,Key,f[l(u) \leftarrow o(u,m)],S'_{\mathit{abs}})$, such that $(X,O \cup \{ o(u,m) \},Par,Key,f[l(u)$ $\leftarrow o(u,m)],S'_{\mathit{imp}}) \thicksim (X,O \cup \{ o(u,m) \},Par,Key,f[l(u) \leftarrow o(u,m)],S'_{\mathit{abs}})$. 

\item[-] Otherwise, assume that $(X,O,Par,Key,f,S_{\mathit{imp}}) \xrightarrow{\mathit{cmd}} (X',O',Par',Key',f',S'_{\mathit{imp}})$. Then, $(X,O$, $Par,Key,f,S_{\mathit{abs}}) \xrightarrow{\mathit{cmd}} (X',O',Par',Key',f',S'_{\mathit{abs}})$, such that $(X',O',Par',Key',f',S'_{\mathit{imp}}) \thicksim (X',O',Par',Key',f',S'_{\mathit{abs}})$. 
\end{itemize}






